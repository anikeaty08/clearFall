ClearFall Protocol

A trustless, time-based Dutch auction protocol with fair price discovery.

ğŸ‘¥ ROLES (IMPORTANT)

There are only two roles, and both are users:

Auction Creator (any user)

Bidder (any user)

No admin.
No superuser.
No backdoors.

ğŸ‘¤ USER PERSPECTIVE â€” FULL WORKFLOW

(This applies to both bidders and creators)

ğŸŸ¢ 1. Open App & Connect Wallet

User opens ClearFall

Connects wallet via WalletConnect

App detects:

Wallet address

Network (Polygon)

ğŸŸ¢ 2. Choose an Action

User can:

Create an auction

Participate in an auction

View past auctions

ğŸŸ¢ 3A. Creating an Auction (User as Creator)
Inputs:

Token address

Total supply to sell

Start price

End price

Auction start time

Auction end time

Commit phase duration

Reveal phase duration

Non-reveal penalty

What happens:

User deposits tokens into contract

Parameters become immutable

Auction is scheduled

â€œOnce created, I cannot change anything.â€

ğŸŸ¢ 3B. Participating in an Auction (User as Bidder)
Commit Phase:

User chooses quantity

Frontend generates nonce

Commitment hash created

Funds locked in contract

Reveal Phase:

User reveals quantity + nonce

Commitment verified

ğŸŸ¢ 4. Auction Runs Automatically

Price decreases over time

Demand accumulates

Clearing happens automatically when demand â‰¥ supply

No manual actions.
No interference.

ğŸŸ¢ 5. Final Settlement

Winners claim tokens

Losers refunded

Creators withdraw proceeds

Everything enforced by contract.

ğŸ§  PRICE DISCOVERY (FINAL LOGIC)
finalPrice = priceAt(timeWhenTotalDemand â‰¥ supply)


Uniform for all winners.

ğŸ—ï¸ FULL ARCHITECTURE
User
 â†“
Frontend (Next.js)
 â†“
WalletConnect
 â†“
Polygon Smart Contracts
 â†“
Events
 â†“
Indexer
 â†“
MongoDB Atlas
 â†“
Notifications + Fast UI

ğŸ‘¨â€ğŸ’» DEVELOPER PERSPECTIVE â€” TECH STACK
ğŸ”¹ Blockchain / Protocol Layer

Polygon PoS

Solidity ^0.8.x

OpenZeppelin

ERC20 / ERC721 support

ğŸ”¹ Smart Contracts

AuctionFactory.sol

DutchAuction.sol

Vault.sol

Responsibilities:

Auction creation

Asset locking

Commitâ€“reveal bids

Time-based pricing

Automatic clearing

Claims & refunds

ğŸ”¹ Frontend

Next.js + React

TypeScript

TailwindCSS

WalletConnect

Ethers.js / Viem

ğŸ”¹ Indexer

Node.js

TypeScript

Ethers.js

Event listeners

ğŸ”¹ Database (MongoDB Atlas)

Used ONLY for:

Caching auction data

UI performance

Notifications

Analytics

Never trusted for logic.

ğŸ”¹ Notification System

Backend workers

Triggers:

Reveal phase start

Auction cleared

Claim available

Delivery:

Email / Push / In-app

ğŸ“„ HOW MANY PAGES (FRONTEND)
Core Pages (6)

/ â†’ Landing + active auctions

/create â†’ Create auction

/auction/[id] â†’ Auction detail

/dashboard â†’ User auctions & bids

/claims â†’ Claim / refund page

/history â†’ Past auctions

ğŸ—‚ï¸ FOLDER STRUCTURE
clearfall/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ AuctionFactory.sol
â”‚   â”œâ”€â”€ DutchAuction.sol
â”‚   â””â”€â”€ Vault.sol
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ create.tsx
â”‚   â”‚   â”œâ”€â”€ auction/[id].tsx
â”‚   â”‚   â”œâ”€â”€ dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ claims.tsx
â”‚   â”‚   â””â”€â”€ history.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ utils/
â”‚   â””â”€â”€ styles/
â”‚
â”œâ”€â”€ indexer/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ listeners/
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ services/
â”‚   â””â”€â”€ main.ts
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ notifications/
â”‚   â”œâ”€â”€ workers/
â”‚   â””â”€â”€ api/
â”‚
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ types/
â”‚   â””â”€â”€ constants/
â”‚
â””â”€â”€ README.md

ğŸ” SECURITY GUARANTEES

No admin functions

Immutable auctions

Time-based price only

Funds locked at commit

Deterministic clearing

Fully verifiable